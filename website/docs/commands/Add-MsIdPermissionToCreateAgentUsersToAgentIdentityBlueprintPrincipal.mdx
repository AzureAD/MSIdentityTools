---
sidebar_class_name: hidden
description: Grants permission to create Agent Users to the Agent Identity Blueprint Principal
id: Add-MsIdPermissionToCreateAgentUsersToAgentIdentityBlueprintPrincipal
title: Add-MsIdPermissionToCreateAgentUsersToAgentIdentityBlueprintPrincipal
hide_title: false
hide_table_of_contents: false
custom_edit_url: https://github.com/azuread/msidentitytools/blob/main/src/Add-MsIdPermissionToCreateAgentUsersToAgentIdentityBlueprintPrincipal.ps1
---

## SYNOPSIS

Grants permission to create Agent Users to the Agent Identity Blueprint Principal

## SYNTAX

```powershell
Add-MsIdPermissionToCreateAgentUsersToAgentIdentityBlueprintPrincipal [[-AgentBlueprintId] <String>]
 [-ProgressAction <ActionPreference>] [<CommonParameters>]
```

## DESCRIPTION

Adds the AgentIdUser.ReadWrite.IdentityParentedBy permission to the Agent Identity Blueprint Service Principal.
This permission allows the blueprint to create agent users that are parented to agent identities.
Uses the stored AgentBlueprintId from the last New-AgentIdentityBlueprint call and the cached Microsoft Graph Service Principal ID.

## EXAMPLES

### EXAMPLE 1

```powershell
New-MsIdAgentIdentityBlueprint -DisplayName "My Blueprint" -SponsorUserIds @("user1")
New-MsIdAgentIdentityBlueprintPrincipal
Add-MsIdPermissionToCreateAgentUsersToAgentIdentityBlueprintPrincipal
```

### EXAMPLE 2

```powershell
Add-MsIdPermissionToCreateAgentUsersToAgentIdentityBlueprintPrincipal -AgentBlueprintId "7c0c1226-1e81-41a5-ad6c-532c95504443"
```

## PARAMETERS

### -AgentBlueprintId

Optional.
The ID of the Agent Identity Blueprint Service Principal to grant permissions to.
If not provided, uses the stored ID from the last blueprint creation.

```yaml
Type: String
Parameter Sets: (All)
Aliases:

Required: False
Position: 1
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### -ProgressAction

\{\{ Fill ProgressAction Description \}\}

```yaml
Type: ActionPreference
Parameter Sets: (All)
Aliases: proga

Required: False
Position: Named
Default value: None
Accept pipeline input: False
Accept wildcard characters: False
```

### CommonParameters

This cmdlet supports the common parameters: -Debug, -ErrorAction, -ErrorVariable, -InformationAction, -InformationVariable, -OutVariable, -OutBuffer, -PipelineVariable, -Verbose, -WarningAction, and -WarningVariable. For more information, see [about_CommonParameters](http://go.microsoft.com/fwlink/?LinkID=113216).

## INPUTS

## OUTPUTS

### Returns the app role assignment response object from Microsoft Graph

## NOTES

## RELATED LINKS
